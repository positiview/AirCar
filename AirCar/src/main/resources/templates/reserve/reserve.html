<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout1}">

<th:block layout:fragment="content">
    <link rel="stylesheet" th:href="@{/assets/css/HJS/reset.css}">
    <link rel="stylesheet" th:href="@{/assets/css/HJS/animate.css}">
<!--    <link rel="stylesheet" th:href="@{/assets/css/HJS/bootstrap-reset.css}">-->
<!--    <link rel="stylesheet" th:href="@{/assets/css/HJS/bootstrap.min.css}">-->
    <link rel="stylesheet" th:href="@{/assets/css/HJS/helper.css}">
    <link rel="stylesheet" th:href="@{/assets/css/HJS/style-responsive.css}">
    <link rel="stylesheet" th:href="@{/assets/css/HJS/style.css}">

    <link rel="stylesheet" th:href="@{/assets/css/HJS/calendar.css}">


 <!--   <link rel="stylesheet" th:href="@{/assets/css/HJS/content.css}">-->
    <link rel="stylesheet" th:href="@{/assets/css/HJS/reserve.css}">
    <link rel="stylesheet" th:href="@{/js/air-datepicker/dist/css/datepicker.min.css}">
    <link rel="stylesheet" th:href="@{/assets/css/register.css}">
    <style>
        input::placeholder {
            color: black;
        }
    </style>

    <div class="container">
        <div class="inner">
            <div class="contents">
                <div class="banner_hot">
                    <div class="test">
                        <li><a href="#"><img src="img/banner_hot_01.png"
                                             alt="제주 럭셔리 차박 빈손으로 떠나자"></a></li>
                        </ul>
                    </div>
                </div>
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                <div class="dill_box_type" th:each="car, carStatus : ${carInfo}">
                    <input type="hidden" name= "reserveStatus" th:value="${car.reserveStatus}">
                    <input type="hidden" class="idx" th:value="${carStatus.index}">
                    <div class="dill_box_wrap">
                        <div class="top_cont">
                            <div class="main_ctext"><img th:src="@{'img_upload/'+${car.brandImg}}" alt="기아자동차" class="car_logo"><span class="car_enter">
                                <th:block th:text="${car.brand}"></th:block></span><em class="c_prd_name">
                                <th:block th:text="${car.name}"></th:block>
                            </em></div>
                            <div class="img_area"><img th:src="@{'img_upload/'+${car.carImg}}"></th:src>
<!--                            <div class="img_area"><img th:src="@{'/assets/car/G90.png'}"></th:src>-->
                            </div>
                        </div>
                        <ul class="dill_list_box">
                            <li class="list_item" data-value="2300000000225_0"><a class="dill_list"
                                                                                  th:href="@{car_detail(carNum=${car.carNum})}">
                                <div class="car_name">
                                    <div class="tag_box"><em class="gray">개인 차량</em></div>
                                    <p class="main_name">[부산지점]
                                        <th:block th:text="${car.name}"></th:block>
                                        ·
                                        <th:block th:text="${car.fuel}"></th:block>
                                    <div><span class="sb_text">
                                            <th:block th:text="${car.year}"></th:block>년식 ·
                                            <th:block th:text="${car.people}"></th:block>인승 ·
                                            <th:block th:text="${car.startDate}"></th:block> ~
                                            <th:block th:text="${#dates.format(car.endDate,'yyyy-MM-dd')}"></th:block>
                                    </span> </div>
                                </div>
                                <div class="price_wrap">
                                    <div class="price_info">
                                        <div class="rate_box">회원할인</div>
                                        <div class="price_num"><span
                                                class="price_regular">403,500원</span><span
                                                class="price_sale"><th:block
                                                th:text="${car.cost}"></th:block>원</span><em
                                                class="rate">75%</em></div>
                                    </div>
                                    <div class="btn_group">
                                        <button th:class="'btn type01 btnStatus' + ${carStatus.index}" th:data-status="${car.reserveStatus}" id="reserveButton" style="background-image: url(/img/btn_bg.jpg);line-height: 38px;" >예약</button>
                                    </div>
                                </div>
                            </a></li>
                        </ul>
                    </div>
                </div>

            </div>
            <div class="sidebar">
                <div id="sideScroll" class="inner">
                    <div class="res_form">
                        <h2 class="title" style="margin: 0px">선택한 여정</h2>
                        <div class="cont"><a class="ico_place" style="font-size: 16px;  color: black; padding-left: 7px"
                                             href="/map">부산지점</a></div>
                        <div class="cont2" style="border-bottom: 1px solid #efefef;"><a class="ico_place2"> <input
                                id="datepicker1" type="text" placeholder="시작일"
                                style="border: none;padding-left: 0; font-size:16px; margin-bottom: 11px;padding-top: 21px;padding-bottom: 8px;"></a>
                        </div>
                        <div class="cont3" style="height: 55px;"><a class="ico_place3"> <input id="datepicker2" type="text" placeholder="반납일"
                                                                         style="font-size:16px; border: none;padding-left: 0;margin-bottom: 11px;"></a>
                        </div>
                        <div class="btn_group">
                            <button class="btn type02" style="line-height: 0px">재검색</button>
                        </div>
                    </div>
                </div>
                <th:block th:replace="fragments/floatCounselling::conselling"></th:block>
            </div>
        </div>
        <div>
            <div style="position: fixed; z-index: 9999; inset: 16px 16px 100px; pointer-events: none;">
                <div class=""
                     style="left: 0px; right: 0px; display: flex; position: absolute; transition: all 230ms cubic-bezier(0.21, 1.02, 0.73, 1) 0s; transform: translateY(0px); bottom: 0px; justify-content: center;">
                    <div class="go2072408551"
                         style="opacity: 0; border-radius: 18px; background: rgba(33, 37, 41, 0.8); color: rgb(255, 255, 255); padding: 4px 6px; font-size: 13px;">
                        <div role="status" aria-live="polite" class="go3958317564">로그아웃 완료! 곧 다시 만나요</div>
                    </div>
                </div>
            </div>
        </div>

        </body>

    </div>
    <script>
        window.onload = function() {
            // input type=hidden 태그 가져옴
            var hiddenStatus =  document.getElementsByName("reserveStatus");

            // input type=hidden 의 status값을 가져와서 값이 1인 버튼 스타일 변경
            for(var i = 0; i < hiddenStatus.length; i++) {
                // hidden 값(=reserve_status값)
                var statusValue = hiddenStatus[i].value;

                if(statusValue == 1) {
                    var index = hiddenStatus[i].nextElementSibling.value;
                    var reserveButton =  document.querySelector(".btnStatus" + index);
                    console.log(reserveButton);
                    reserveButton.style ="";
                    reserveButton.style.lineHeight ="31px";
                    reserveButton.style.backgroundColor="#777777";
                    reserveButton.style.color="black";
                    reserveButton.innerText="예약 완료";
                    reserveButton.disabled = true; // 버튼 비활성화
                    reserveButton.addEventListener("click", function() {
                        alert("예약이 완료된 차량입니다");
                    });
                }
            }
            // console.log(hiddenStatus);
            // var reserveButton = document.getElementsByClassName("type01");
            //
            //
            // if (status == 1) {
            //     // 예약 상태가 1인 경우
            //     reserveButton.style.backgroundColor = "gray"; // 배경색을 회색으로 변경
            //     reserveButton.disabled = true; // 버튼 비활성화
            //
            //     reserveButton.addEventListener("click", function() {
            //         alert("예약이 완료된 차량입니다");
            //     });
            // }
        }
    </script>
</th:block>
</html>